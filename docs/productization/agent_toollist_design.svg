<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1500 950">
  <defs>
    <style>
      .title { font: bold 28px sans-serif; fill: #1a1a1a; }
      .section-title { font: bold 18px sans-serif; fill: #2c3e50; }
      .subtitle { font: bold 15px sans-serif; fill: #34495e; }
      .text { font: 13px sans-serif; fill: #2c3e50; }
      .small-text { font: 11px sans-serif; fill: #555; }
      .metric { font: bold 14px sans-serif; fill: #e74c3c; }
      .code { font: 12px monospace; fill: #555; }

      .init-box { fill: #e3f2fd; stroke: #1976d2; stroke-width: 2; }
      .execute-box { fill: #fff3e0; stroke: #f57c00; stroke-width: 2; }
      .tool-box { fill: #e8f5e9; stroke: #388e3c; stroke-width: 2; }
      .adaptation-box { fill: #fce4ec; stroke: #c2185b; stroke-width: 2; }
      .table-box { fill: #f3e5f5; stroke: #7b1fa2; stroke-width: 2; }
    </style>
  </defs>

  <!-- 标题 -->
  <text x="750" y="40" text-anchor="middle" class="title">Agent Toollist Design</text>
  <text x="750" y="65" text-anchor="middle" class="small-text">基于Wenning工具复用和适配</text>

  <!-- ==================== 第一行：工具配置对比表 ==================== -->
  <rect x="50" y="100" width="1400" height="200" class="table-box" rx="10"/>
  <text x="750" y="130" text-anchor="middle" class="section-title">工具配置对比</text>

  <!-- 表头 -->
  <rect x="100" y="150" width="300" height="40" class="table-box" rx="5" fill="white"/>
  <text x="250" y="175" text-anchor="middle" class="text" font-weight="bold">工具</text>

  <rect x="420" y="150" width="300" height="40" class="init-box" rx="5" fill="white"/>
  <text x="570" y="175" text-anchor="middle" class="text" font-weight="bold">Init Agent</text>

  <rect x="740" y="150" width="300" height="40" class="execute-box" rx="5" fill="white"/>
  <text x="890" y="175" text-anchor="middle" class="text" font-weight="bold">Execute Agent</text>

  <rect x="1060" y="150" width="340" height="40" class="table-box" rx="5" fill="white"/>
  <text x="1230" y="175" text-anchor="middle" class="text" font-weight="bold">说明</text>

  <line x1="100" y1="190" x2="1400" y2="190" stroke="#7b1fa2" stroke-width="1"/>

  <!-- 数据行 -->
  <!-- file_reader -->
  <rect x="100" y="200" width="300" height="25" fill="white"/>
  <text x="110" y="217" class="small-text">file_reader</text>
  <rect x="420" y="200" width="300" height="25" fill="white"/>
  <text x="570" y="217" text-anchor="middle" class="metric">✓</text>
  <rect x="740" y="200" width="300" height="25" fill="white"/>
  <text x="890" y="217" text-anchor="middle" class="metric">✓</text>
  <rect x="1060" y="200" width="340" height="25" fill="white"/>
  <text x="1070" y="217" class="small-text">读取文件（JSON/MD/Python）</text>

  <!-- file_writer -->
  <rect x="100" y="225" width="300" height="25" fill="white"/>
  <text x="110" y="242" class="small-text">file_writer</text>
  <rect x="420" y="225" width="300" height="25" fill="white"/>
  <text x="570" y="242" text-anchor="middle" class="metric">✓</text>
  <rect x="740" y="225" width="300" height="25" fill="white"/>
  <text x="890" y="242" text-anchor="middle" class="metric">✓</text>
  <rect x="1060" y="225" width="340" height="25" fill="white"/>
  <text x="1070" y="242" class="small-text">创建/覆盖文件</text>

  <!-- file_editor -->
  <rect x="100" y="250" width="300" height="25" fill="white"/>
  <text x="110" y="267" class="small-text">file_editor</text>
  <rect x="420" y="250" width="300" height="25" fill="white"/>
  <text x="570" y="267" text-anchor="middle" class="metric">✓</text>
  <rect x="740" y="250" width="300" height="25" fill="white"/>
  <text x="890" y="267" text-anchor="middle" class="metric">✓</text>
  <rect x="1060" y="250" width="340" height="25" fill="white"/>
  <text x="1070" y="267" class="small-text">编辑已有文件（替换/行范围）</text>

  <!-- bash -->
  <rect x="100" y="275" width="300" height="25" fill="white"/>
  <text x="110" y="292" class="small-text">bash</text>
  <rect x="420" y="275" width="300" height="25" fill="white"/>
  <text x="570" y="292" text-anchor="middle" class="small-text">✗</text>
  <rect x="740" y="275" width="300" height="25" fill="white"/>
  <text x="890" y="292" text-anchor="middle" class="metric">✓</text>
  <rect x="1060" y="275" width="340" height="25" fill="white"/>
  <text x="1070" y="292" class="small-text">执行shell命令，运行测试和评测</text>

  <!-- use_skill -->
  <rect x="100" y="300" width="300" height="25" fill="white"/>
  <text x="110" y="317" class="small-text">use_skill</text>
  <rect x="420" y="300" width="300" height="25" fill="white"/>
  <text x="570" y="317" text-anchor="middle" class="metric">✓</text>
  <rect x="740" y="300" width="300" height="25" fill="white"/>
  <text x="890" y="317" text-anchor="middle" class="metric">✓</text>
  <rect x="1060" y="300" width="340" height="25" fill="white"/>
  <text x="1070" y="317" class="small-text">获取技能库（SOP、模板、最佳实践）</text>

  <!-- ==================== 第二行：两个Agent的工具详情 ==================== -->

  <!-- 左：Init Agent -->
  <rect x="50" y="365" width="680" height="455" class="init-box" rx="10"/>
  <text x="390" y="395" text-anchor="middle" class="section-title">Init Agent Toollist</text>

  <rect x="80" y="415" width="620" height="385" class="init-box" rx="5" fill="white"/>

  <!-- 角色 -->
  <text x="90" y="435" class="subtitle">角色与职责</text>
  <text x="100" y="453" class="small-text">场景设计（Layer 1）：生成设计 + 基于反馈修改</text>
  <text x="100" y="468" class="small-text">交付：yaml + BusinessRules + format + InitToExecuteContext</text>

  <!-- file_reader -->
  <text x="90" y="498" class="subtitle">file_reader</text>
  <line x1="90" y1="507" x2="690" y2="507" stroke="#1976d2" stroke-width="1"/>
  <text x="100" y="525" class="small-text">• 读取ExecuteToInitContext（Execute反馈）</text>
  <text x="100" y="540" class="small-text">• 分析失败样本JSON和trace文件</text>

  <!-- file_writer -->
  <text x="90" y="565" class="subtitle">file_writer + file_editor</text>
  <line x1="90" y1="574" x2="690" y2="574" stroke="#1976d2" stroke-width="1"/>
  <text x="100" y="592" class="small-text">• 创建BusinessRules.md（业务规则）</text>
  <text x="100" y="607" class="small-text">• 生成format规范和InitToExecuteContext</text>
  <text x="100" y="622" class="small-text">• 基于反馈修改设计文档</text>

  <!-- use_skill -->
  <text x="90" y="647" class="subtitle">use_skill</text>
  <line x1="90" y1="656" x2="690" y2="656" stroke="#1976d2" stroke-width="1"/>
  <text x="100" y="674" class="small-text">• 获取business_rules_authoring</text>
  <text x="100" y="689" class="small-text">• 获取format_specification_guide</text>
  <text x="100" y="704" class="small-text">• 获取scenario_design_sop</text>

  <!-- 配置 -->
  <text x="90" y="729" class="subtitle">路径配置</text>
  <line x1="90" y1="738" x2="690" y2="738" stroke="#1976d2" stroke-width="1"/>
  <text x="100" y="753" class="code">base_dir: scenarios/{scenario_name}/</text>
  <text x="100" y="778" class="code">技能库: skills/</text>

  <!-- 右：Execute Agent -->
  <rect x="770" y="365" width="680" height="455" class="execute-box" rx="10"/>
  <text x="1110" y="395" text-anchor="middle" class="section-title">Execute Agent Toollist</text>

  <rect x="800" y="415" width="620" height="385" class="execute-box" rx="5" fill="white"/>

  <!-- 角色 -->
  <text x="810" y="435" class="subtitle">角色与职责</text>
  <text x="820" y="453" class="small-text">执行评测修复（Layer 2-4）：生成组件 + 迭代修复</text>
  <text x="820" y="468" class="small-text">交付：tools + checkers + samples + ExecuteToInitContext</text>

  <!-- file_reader -->
  <text x="810" y="498" class="subtitle">file_reader</text>
  <line x1="810" y1="507" x2="1410" y2="507" stroke="#f57c00" stroke-width="1"/>
  <text x="820" y="525" class="small-text">• 读取InitToExecuteContext（Init设计）</text>
  <text x="820" y="540" class="small-text">• 查看BusinessRules和format规范</text>

  <!-- file_writer + file_editor -->
  <text x="810" y="565" class="subtitle">file_writer + file_editor</text>
  <line x1="810" y1="574" x2="1410" y2="574" stroke="#f57c00" stroke-width="1"/>
  <text x="820" y="592" class="small-text">• 创建tools/checkers/samples代码</text>
  <text x="820" y="607" class="small-text">• 生成ExecuteToInitContext反馈</text>
  <text x="820" y="622" class="small-text">• 修复bug并调整验证逻辑</text>

  <!-- bash -->
  <text x="810" y="647" class="subtitle">bash</text>
  <line x1="810" y1="656" x2="1410" y2="656" stroke="#f57c00" stroke-width="1"/>
  <text x="820" y="674" class="small-text">• 执行代码测试验证功能</text>
  <text x="820" y="689" class="small-text">• 运行评测脚本分析结果</text>

  <!-- use_skill -->
  <text x="810" y="714" class="subtitle">use_skill</text>
  <line x1="810" y1="723" x2="1410" y2="723" stroke="#f57c00" stroke-width="1"/>
  <text x="820" y="741" class="small-text">• 获取tool_implementation</text>
  <text x="820" y="756" class="small-text">• 获取checker_implementation</text>
  <text x="820" y="771" class="small-text">• 获取sample_authoring</text>

  <!-- 配置 -->
  <text x="810" y="794" class="code">work_dir: scenarios/{name}/execution_outputs/iteration_N/</text>

  <!-- ==================== 底部：关键适配要点 ==================== -->
  <rect x="50" y="850" width="1400" height="80" class="adaptation-box" rx="10"/>
  <text x="750" y="880" text-anchor="middle" class="section-title">关键适配要点</text>

  <text x="100" y="905" class="text">路径适配：</text>
  <text x="200" y="905" class="small-text">Wenning的conversation_id → 场景框架的scenario_name + iteration_N</text>

  <text x="100" y="920" class="text">技能库扩展：</text>
  <text x="220" y="920" class="small-text">需要在skills/目录创建8个技能（SKILL.md + templates + examples + sop）</text>

</svg>
