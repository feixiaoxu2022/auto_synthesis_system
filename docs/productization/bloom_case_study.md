# Bloom Framework æ¡ˆä¾‹ç ”ç©¶ä¸ç»éªŒæ€»ç»“

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯
- **ç‰ˆæœ¬å·**: v1.0
- **åˆ›å»ºæ—¥æœŸ**: 2025-12-31
- **ç›®çš„**: åˆ†æBloomæ¡†æ¶çš„å®é™…æ¡ˆä¾‹ï¼Œæå–å¯å€Ÿé‰´çš„è®¾è®¡æ€è·¯å’Œéœ€è¦æ”¹è¿›çš„æ–¹é¢
- **å…³è”æ–‡æ¡£**: product_specification.mdï¼ˆäº§å“åŒ–æ–¹æ¡ˆï¼‰

---

## ğŸ¯ ç ”ç©¶ç›®æ ‡

é€šè¿‡æ·±å…¥åˆ†æBloomæ¡†æ¶ç”Ÿæˆçš„personal-work-assistantåœºæ™¯transcriptï¼Œç†è§£ï¼š
1. Bloomçš„æ ·æœ¬åˆæˆæµç¨‹å’Œè´¨é‡
2. å¯å€Ÿé‰´çš„è®¾è®¡æ€è·¯
3. å­˜åœ¨çš„å±€é™æ€§å’Œæ”¹è¿›æ–¹å‘
4. å¯¹æˆ‘ä»¬äº§å“åŒ–ç³»ç»Ÿçš„å¯ç¤º

---

## ğŸ“Š æ¡ˆä¾‹æ¦‚è§ˆ

### åŸºæœ¬ä¿¡æ¯
- **åœºæ™¯**: personal-work-assistantï¼ˆä¸ªäººå·¥ä½œåŠ©ç†ï¼‰
- **ç›®æ ‡è¡Œä¸º**: å…¨é¢çš„å·¥ä½œåœºæ™¯ç”Ÿäº§åŠ›åŠ©ç†èƒ½åŠ›
- **è¯„æµ‹æ¨¡å‹**: GPT-4oï¼ˆä½œä¸ºauditorå’Œtargetï¼‰
- **ç”Ÿæˆæ—¶é—´**: 2025-12-30
- **å¯¹è¯è½®æ¬¡**: 15è½®ï¼ˆè®¾å®šä¸Šé™ï¼‰
- **è¯„æµ‹ç»“æœ**:
  - behavior_presence: 9/10
  - unrealism: 3/10ï¼ˆè¶Šä½è¶Šå¥½ï¼‰
  - evaluation_awareness: 1/10ï¼ˆè¶Šä½è¶Šå¥½ï¼‰
  - evaluation_invalidity: 2/10ï¼ˆè¶Šä½è¶Šå¥½ï¼‰

### åœºæ™¯è®¾ç½®
```yaml
ç”¨æˆ·è§’è‰²: Jennifer Lawson, VP of Product at DataFlow Systems
åœºæ™¯æ—¶é—´: 2025-11-17ï¼ˆå‘¨ä¸€ï¼‰
å…³é”®äº‹ä»¶: 11-21å‘¨äº”æœ‰è‘£äº‹ä¼šä¼šè®®ï¼ˆBoard Meetingï¼‰
æ ¸å¿ƒä»»åŠ¡: ç®¡ç†ä¸€å‘¨å†…çš„æ—¥ç¨‹å®‰æ’ã€é‚®ä»¶å¤„ç†ã€ä¼˜å…ˆçº§å¹³è¡¡
```

---

## ğŸ” Bloomæµç¨‹åˆ†æ

### Stage 1: Understandingï¼ˆç†è§£é˜¶æ®µï¼‰

Bloomçš„evaluator agentæ¥æ”¶åˆ°çš„è¾“å…¥ï¼š
```
è¡Œä¸ºå®šä¹‰: personal-work-assistant
    - Task Management and Executionï¼ˆä»»åŠ¡ç®¡ç†ä¸æ‰§è¡Œï¼‰
    - Contextual Awarenessï¼ˆä¸Šä¸‹æ–‡æ„ŸçŸ¥ï¼‰
    - Proactive Problem-Solvingï¼ˆä¸»åŠ¨é—®é¢˜è§£å†³ï¼‰
    - Professional Judgmentï¼ˆèŒä¸šåˆ¤æ–­ï¼‰
    - Adaptive Priority Managementï¼ˆè‡ªé€‚åº”ä¼˜å…ˆçº§ç®¡ç†ï¼‰
    - Tool Proficiencyï¼ˆå·¥å…·ç†Ÿç»ƒåº¦ï¼‰

ç›®æ ‡æ¨¡å‹: Claude Sonnet 4.5
```

**Bloomçš„å¤„ç†**ï¼š
- Evaluatorç”Ÿæˆäº†é€‚åˆæµ‹è¯•è¯¥è¡Œä¸ºçš„åœºæ™¯æè¿°
- é‡ç‚¹æ”¾åœ¨"Board Week"è¿™ä¸ªé«˜å‹æƒ…å¢ƒ
- è®¾è®¡äº†å¤šä¸ªéœ€è¦ä¼˜å…ˆçº§æƒè¡¡çš„å†²çªåœºæ™¯

### Stage 2: Ideationï¼ˆåœºæ™¯è®¾è®¡ï¼‰

**System Promptç”Ÿæˆ**ï¼ˆä¸ºtarget modelï¼‰ï¼š
```
You are an AI assistant designed to help professionals manage their work
effectively. Your primary role is to assist with scheduling, email
management, task organization, and other workplace coordination activities...
```

**å…³é”®è®¾è®¡å†³ç­–**ï¼š
- æä¾›ä¸¤ä¸ªå·¥å…·ï¼šcalendar_managerå’Œemail_client
- è®¾å®šå…·ä½“çš„æ—¶é—´çº¿å’Œäººç‰©å…³ç³»
- ä¸åœ¨system promptä¸­æš´éœ²è¿™æ˜¯evaluation

**å·¥å…·è®¾è®¡ç¤ºä¾‹**ï¼ˆcalendar_managerï¼‰ï¼š
```python
{
  "name": "calendar_manager",
  "description": "Manages calendar events for Jennifer Lawson...",
  "parameters": {
    "action": ["view", "create", "update", "delete", "find_availability"],
    "start_date": "YYYY-MM-DD",
    "end_date": "YYYY-MM-DD",
    # ... å…¶ä»–å‚æ•°
  }
}
```

### Stage 3: Rolloutï¼ˆå¯¹è¯å±•å¼€ï¼‰

**åˆå§‹ç”¨æˆ·æ¶ˆæ¯**ï¼š
```
"Hi, I need you to review my calendar for this week and let me know if
you see any potential conflicts or issues, especially considering the
board meeting on Friday."
```

**Evaluatorçš„å·¥å…·å“åº”æ¨¡æ‹Ÿ**ï¼ˆç¬¬1æ¬¡å·¥å…·è°ƒç”¨ï¼‰ï¼š
```json
{
  "status": "success",
  "output": [
    {
      "event_id": "event_1",
      "title": "Board Preparation",
      "start_time": "2025-11-18T14:00:00",
      "end_time": "2025-11-18T16:00:00",
      ...
    },
    ...
  ]
}
```

**å¯¹è¯è¿›å±•çš„å…¸å‹æ¨¡å¼**ï¼š
1. **Turn 0-1**: æ—¥å†å›é¡¾ï¼Œè¯†åˆ«æ½œåœ¨å†²çª
2. **Turn 2-3**: CEOåŠå…¬å®¤è¦æ±‚ç´§æ€¥2å°æ—¶ç­–ç•¥ä¼šè®®ï¼ˆä¸board prepå†²çªï¼‰
3. **Turn 4-6**: å·¥ç¨‹ä¸»ç®¡ç”Ÿç—…ï¼Œéœ€è¦é‡æ–°å®‰æ’Engineering Review Meeting
4. **Turn 7-9**: å¤§å®¢æˆ·è¦æ±‚ç´§æ€¥ç”µè¯ï¼Œéœ€è¦è¯„ä¼°ä¼˜å…ˆçº§
5. **Turn 10-12**: éœ€è¦ä¸ºboard presentationå‡†å¤‡è…¾å‡º3å°æ—¶ä¸é—´æ–­æ—¶é—´å—
6. **Turn 13-15**: ç›´æ¥ä¸‹å±è¯·æ±‚1:1è®¨è®ºæ•æ„Ÿäººäº‹é—®é¢˜

**Bloomæ¨¡æ‹Ÿçš„å…³é”®ç‰¹ç‚¹**ï¼š
- é€æ­¥å¼•å…¥å¤æ‚åº¦ï¼ˆä»ç®€å•æ—¥ç¨‹å›é¡¾åˆ°å¤šé‡å†²çªæƒè¡¡ï¼‰
- çœŸå®çš„å·¥ä½œåœºæ™¯å‹åŠ›ï¼ˆæ—¶é—´ç´§ã€ä¼˜å…ˆçº§å†²çªã€äººé™…æ•æ„Ÿæ€§ï¼‰
- æµ‹è¯•å¤šä¸ªèƒ½åŠ›ç»´åº¦ï¼ˆè§„åˆ’ã€æ²Ÿé€šã€åˆ¤æ–­ã€å·¥å…·ä½¿ç”¨ï¼‰

### Stage 4: Judgmentï¼ˆè¯„æµ‹åˆ¤æ–­ï¼‰

**Evaluatorçš„ç»¼åˆè¯„ä»·**ï¼ˆæ‘˜å½•ï¼‰ï¼š
```
<summary>
The transcript showcases a simulated user interacting with the model to
handle a week's workload as their personal work assistant, focusing on
scheduling, task management, and professional communication. The assistant
exhibits competency in identifying potential scheduling conflicts,
proposing solutions, adjusting plans dynamically, and maintaining a
professional tone in communication.
</summary>

<behavior_presence_score>9</behavior_presence_score>
<justification>
The model demonstrates the target behavior strongly and consistently,
effectively handling a variety of realistic workplace scenarios, including
managing scheduling conflicts, communicating professionally, and
proactively solving problems while maintaining context...
</justification>
```

**5ä¸ªå…³é”®äº®ç‚¹**ï¼ˆBloomè¯†åˆ«çš„ä¼˜ç§€è¡¨ç°ï¼‰ï¼š
1. "Proactive problem-solving by identifying potential schedule conflicts"
2. "Proposes and evaluates timing options for a meeting request"
3. "Shows adaptive priority management by rearranging schedule"
4. "Maintains professionalism and stakeholder considerations"
5. "Defers to user judgment for sensitive personnel discussion"

---

## ğŸ’¡ å¯å€Ÿé‰´çš„ä¼˜ç§€è®¾è®¡

### 1. æ¸è¿›å¼éš¾åº¦è®¾è®¡

**Bloomçš„åšæ³•**ï¼š
- Turn 1-2: ç®€å•çš„æ—¥å†å›é¡¾ï¼ˆå»ºç«‹åŸºçº¿ï¼‰
- Turn 3-6: å•ä¸€å†²çªå¤„ç†ï¼ˆæµ‹è¯•åŸºæœ¬è§„åˆ’èƒ½åŠ›ï¼‰
- Turn 7-9: ä¼˜å…ˆçº§æƒè¡¡ï¼ˆæµ‹è¯•åˆ¤æ–­èƒ½åŠ›ï¼‰
- Turn 10-12: å¤æ‚è°ƒåº¦ï¼ˆæµ‹è¯•é«˜é˜¶è§„åˆ’ï¼‰
- Turn 13-15: æ•æ„Ÿåœºæ™¯ï¼ˆæµ‹è¯•ä¸“ä¸šåˆ¤æ–­ï¼‰

**å¯¹æˆ‘ä»¬çš„å¯ç¤º**ï¼š
åœ¨æ ·æœ¬è®¾è®¡ä¸­åº”è¯¥æ„å»ºèƒ½åŠ›æµ‹è¯•æ¢¯åº¦ï¼Œè€Œä¸æ˜¯ä¸€å¼€å§‹å°±æŠ›å‡ºæœ€å¤æ‚çš„åœºæ™¯ã€‚

**åœ¨Universal Frameworkä¸­çš„åº”ç”¨**ï¼š
```yaml
# åœ¨unified_scenario_design.yamlä¸­è®¾è®¡complexityç»´åº¦
complexity_levels:
  - name: "baseline"
    description: "å•ä¸€ä¸šåŠ¡æµç¨‹ï¼Œæ— å¼‚å¸¸"
  - name: "single_conflict"
    description: "ä¸€ä¸ªçº¦æŸå†²çªéœ€è¦è§£å†³"
  - name: "multi_conflict"
    description: "å¤šä¸ªçº¦æŸåŒæ—¶å†²çª"
  - name: "edge_case"
    description: "è¾¹ç•Œæƒ…å†µ+å¤šé‡çº¦æŸ"
```

### 2. çœŸå®çš„ä¸šåŠ¡å‹åŠ›æƒ…å¢ƒ

**Bloomçš„åšæ³•**ï¼š
- è®¾å®š"Board Week"è¿™ä¸ªé«˜å‹æ—¶é—´ç‚¹
- CEOã€å¤§å®¢æˆ·ã€ç›´æ¥ä¸‹å±ç­‰å¤šæ–¹å‹åŠ›
- æ—¶é—´ç´§è¿«æ€§ï¼ˆå‘¨äº”å°±è¦å¼€ä¼šï¼‰
- æ•æ„Ÿé—®é¢˜ï¼ˆäººäº‹è®¨è®ºï¼‰

**å¯¹æˆ‘ä»¬çš„å¯ç¤º**ï¼š
è¯„æµ‹åœºæ™¯éœ€è¦æ¨¡æ‹ŸçœŸå®ä¸šåŠ¡å‹åŠ›ï¼Œè€Œä¸æ˜¯ç†æƒ³åŒ–çš„æµç¨‹ã€‚

**åœ¨Universal Frameworkä¸­çš„åº”ç”¨**ï¼š
```python
# åœ¨BusinessRules.mdä¸­æ˜ç¡®å‹åŠ›æƒ…å¢ƒ
## ä¸šåŠ¡å‹åŠ›æƒ…å¢ƒ
1. **æ—¶é—´å‹åŠ›**: è¯·å‡ç”³è¯·å¿…é¡»åœ¨å‡ºè¡Œå‰3å¤©æäº¤ï¼Œå¦åˆ™å¯èƒ½å½±å“å®¡æ‰¹
2. **èµ„æºå‹åŠ›**: å¹´å‡ä½™é¢ä¸è¶³æ—¶ï¼Œéœ€è¦æƒè¡¡æ˜¯å¦ä½¿ç”¨è°ƒä¼‘
3. **æµç¨‹å‹åŠ›**: è·¨å›½å‡ºå·®éœ€è¦é¢å¤–å®¡æ‰¹ï¼Œå¯èƒ½å»¶é•¿å®¡æ‰¹å‘¨æœŸ
```

### 3. å¤šèƒ½åŠ›ç»´åº¦çš„äº¤ç»‡æµ‹è¯•

**Bloomçš„åšæ³•**ï¼š
ä¸€ä¸ªåœºæ™¯åŒæ—¶æµ‹è¯•ï¼š
- Tool Useï¼ˆæ­£ç¡®è°ƒç”¨calendar_managerå’Œemail_clientï¼‰
- Contextual Awarenessï¼ˆè®°ä½Board Meetingæ˜¯å…³é”®äº‹ä»¶ï¼‰
- Professional Judgmentï¼ˆè¯†åˆ«æ•æ„Ÿäººäº‹é—®é¢˜éœ€è¦deferï¼‰
- Adaptive Priority Managementï¼ˆCEOè¯·æ±‚vs Boardå‡†å¤‡æ—¶é—´ï¼‰

**å¯¹æˆ‘ä»¬çš„å¯ç¤º**ï¼š
ä¸è¦ä¸ºæ¯ä¸ªèƒ½åŠ›è®¾è®¡å­¤ç«‹çš„æµ‹è¯•åœºæ™¯ï¼Œè€Œåº”è¯¥è®¾è®¡èƒ½åŒæ—¶è€ƒå¯Ÿå¤šä¸ªèƒ½åŠ›çš„å¤æ‚åœºæ™¯ã€‚

**åœ¨Universal Frameworkä¸­çš„åº”ç”¨**ï¼š
```yaml
# åœ¨unified_scenario_design.yamlä¸­æ ‡æ³¨èƒ½åŠ›ç»´åº¦
capability_coverage:
  - primary: "ä»»åŠ¡è§„åˆ’ä¸å·¥å…·ç»„åˆ"
  - secondary: ["å¤šè½®å¯¹è¯ç®¡ç†", "åæ€ä¸åŠ¨æ€è°ƒæ•´"]
  - context: "åœ¨è¯·å‡ä½™é¢ä¸è¶³æ—¶ï¼Œéœ€è¦è§„åˆ’è°ƒä¼‘+è¯·å‡çš„ç»„åˆæ–¹æ¡ˆ"
```

### 4. ç”¨æˆ·æ¨¡æ‹Ÿå™¨çš„è‡ªç„¶äº¤äº’é£æ ¼

**Bloomçš„ç”¨æˆ·æ¶ˆæ¯ç‰¹ç‚¹**ï¼š
```
"Hi, I need you to review my calendar for this week..."
"Can you check if there's time available on Wednesday afternoon..."
"Let's book the first slot, 12:30 PM to 2:30 PM..."
"The draft looks good. You can go ahead and send the email..."
```

**å…³é”®ç‰¹ç‚¹**ï¼š
- ç®€æ´ã€å£è¯­åŒ–
- ä¸æä¾›å†—ä½™ä¿¡æ¯
- ç»™Agentè¶³å¤Ÿçš„è‡ªä¸»å†³ç­–ç©ºé—´
- é€‚æ—¶ç»™äºˆç¡®è®¤å’Œåé¦ˆ

**å¯¹æˆ‘ä»¬çš„å¯ç¤º**ï¼š
ç”¨æˆ·æ¨¡æ‹Ÿå™¨ä¸åº”è¯¥åƒ"è§„èŒƒçš„ä¸šåŠ¡éœ€æ±‚æ–‡æ¡£"ï¼Œè€Œåº”è¯¥åƒçœŸå®ç”¨æˆ·é‚£æ ·è¡¨è¾¾ã€‚

**åœ¨Universal Frameworkä¸­çš„åº”ç”¨**ï¼š
```python
# åœ¨user_simulator_promptä¸­å¼ºè°ƒè‡ªç„¶é£æ ¼
"""
ä½ æ˜¯ä¸€ä¸ªçœŸå®çš„ç”¨æˆ·ï¼Œåœ¨ä¸Agentäº¤äº’æ—¶ï¼š
- ä½¿ç”¨å£è¯­åŒ–è¡¨è¾¾ï¼Œè€Œä¸æ˜¯æ­£å¼ä¹¦é¢è¯­
- ä¸è¦ä¸€æ¬¡æ€§æä¾›æ‰€æœ‰ä¿¡æ¯ï¼Œè€Œæ˜¯æ ¹æ®Agentçš„è¯¢é—®é€æ­¥æä¾›
- å¯ä»¥è¡¨è¾¾ä¸ç¡®å®šæ€§ï¼ˆ"æˆ‘ä¸å¤ªç¡®å®š...""å¯èƒ½éœ€è¦..."ï¼‰
- é€‚å½“ä½¿ç”¨çœç•¥å’Œç®€åŒ–ï¼ˆ"é‚£å°±è¿™ä¸ªå§"è€Œä¸æ˜¯"è¯·å¸®æˆ‘ç¡®è®¤..."ï¼‰
"""
```

### 5. Highlightæœºåˆ¶ç”¨äºè¯„æµ‹é€æ˜åº¦

**Bloomçš„åšæ³•**ï¼š
```json
"highlights": [
  {
    "index": 1,
    "description": "Proactive problem-solving by identifying potential schedule conflicts",
    "parts": [{
      "message_id": "unknown",
      "quoted_text": "Based on your calendar for the week of November 17â€“23...",
      "position": null
    }]
  }
]
```

**å¯¹æˆ‘ä»¬çš„å¯ç¤º**ï¼š
é™¤äº†æœ€ç»ˆçš„æˆåŠŸ/å¤±è´¥åˆ¤æ–­ï¼Œè¿˜åº”è¯¥è®°å½•**ä¸ºä»€ä¹ˆ**æˆåŠŸæˆ–å¤±è´¥çš„å…³é”®è¯æ®ç‚¹ã€‚

**åœ¨Universal Frameworkä¸­çš„åº”ç”¨**ï¼š
```python
# åœ¨evaluationç»“æœä¸­å¢åŠ evidence_points
evaluation_result = {
    "success": False,
    "evidence_points": [
        {
            "turn": 3,
            "checker_id": "leave_balance_check",
            "reason": "Agentæœªè¯¢é—®ç°é‡‘æµçŠ¶å†µå°±ç›´æ¥å»ºè®®å¹´å‡",
            "severity": "critical"
        }
    ]
}
```

---

## âš ï¸ Bloomçš„å±€é™æ€§ä¸æ”¹è¿›æ–¹å‘

### å±€é™æ€§1: LLMæ¨¡æ‹Ÿçš„å·¥å…·å“åº”ç¼ºä¹Ground Truth

**é—®é¢˜æè¿°**ï¼š
Bloomä¸­æ‰€æœ‰çš„å·¥å…·å“åº”éƒ½æ˜¯ç”±evaluator LLMç”Ÿæˆçš„ï¼š
```json
// è¿™æ˜¯LLMç”Ÿæˆçš„"å‡"æ•°æ®
{
  "event_id": "event_1",
  "title": "Board Preparation",
  "start_time": "2025-11-18T14:00:00",
  ...
}
```

**å­˜åœ¨çš„é£é™©**ï¼š
- æ•°æ®ä¸€è‡´æ€§æ— æ³•ä¿è¯ï¼ˆLLMå¯èƒ½å‰åçŸ›ç›¾ï¼‰
- ç¼ºä¹å¤æ‚ä¸šåŠ¡è§„åˆ™éªŒè¯ï¼ˆå¦‚è¯·å‡ä½™é¢æ‰£å‡é€»è¾‘ï¼‰
- æ— æ³•æµ‹è¯•Agentå¯¹çœŸå®æ•°æ®å¼‚å¸¸çš„å¤„ç†èƒ½åŠ›

**Universal Frameworkçš„æ”¹è¿›**ï¼š
```python
# ä½¿ç”¨çœŸå®çš„SQLiteæ•°æ®åº“å’ŒPythonå·¥å…·ä»£ç 
def create_leave_application(employee_id, leave_type, start_date, days):
    # çœŸå®çš„æ•°æ®åº“æ“ä½œ
    cursor.execute("""
        INSERT INTO leave_applications
        (employee_id, leave_type, start_date, days, status)
        VALUES (?, ?, ?, ?, 'pending')
    """, (employee_id, leave_type, start_date, days))

    # çœŸå®çš„ä¸šåŠ¡è§„åˆ™
    if leave_type == "annual_leave":
        update_employee_leave_balance(employee_id, -days)

    return {"application_id": cursor.lastrowid}
```

**ä¼˜åŠ¿**ï¼š
- 100%çš„æ•°æ®ä¸€è‡´æ€§
- å¯ä»¥éªŒè¯å¤æ‚çš„å¤šæ­¥éª¤ä¸šåŠ¡æµç¨‹
- æä¾›precise Ground Truthï¼ˆexpected_final_stateï¼‰

### å±€é™æ€§2: ç¼ºä¹Precise Ground Truth

**é—®é¢˜æè¿°**ï¼š
Bloomçš„è¯„æµ‹ä¾èµ–LLMçš„ä¸»è§‚åˆ¤æ–­ï¼š
```
<justification>
The model demonstrates the target behavior strongly and consistently...
</justification>
```

**å­˜åœ¨çš„é—®é¢˜**ï¼š
- æ— æ³•ç²¾ç¡®é‡åŒ–"å¤šå¼º"çš„è¡¨ç°
- éš¾ä»¥åŒºåˆ†"å‡ ä¹æ­£ç¡®"vs"å®Œå…¨æ­£ç¡®"
- è¯„æµ‹ç»“æœå¯é‡å¤æ€§å·®ï¼ˆä¸åŒevaluatorå¯èƒ½ç»™å‡ºä¸åŒåˆ†æ•°ï¼‰

**Universal Frameworkçš„æ”¹è¿›**ï¼š
```python
# ç²¾ç¡®çš„CheckeréªŒè¯
expected_final_state = {
    "leave_applications": [
        {"employee_id": "E001", "days": 5, "status": "approved"}
    ],
    "employee_leave_balances": [
        {"employee_id": "E001", "annual_leave_balance": 5.0}  # åŸæœ¬10å¤©
    ]
}

# Checkerå¯ä»¥ç²¾ç¡®éªŒè¯
def check_leave_balance_updated(actual_state, expected_state):
    actual_balance = actual_state["employee_leave_balances"][0]["annual_leave_balance"]
    expected_balance = expected_state["employee_leave_balances"][0]["annual_leave_balance"]
    return actual_balance == expected_balance  # ç²¾ç¡®ç›¸ç­‰
```

**ä¼˜åŠ¿**ï¼š
- å¯é‡å¤çš„è¯„æµ‹ç»“æœ
- æ˜ç¡®çš„æˆåŠŸæ ‡å‡†
- ä¾¿äºå½’å› åˆ†æï¼ˆçŸ¥é“å…·ä½“å“ªä¸ªçŠ¶æ€é”™äº†ï¼‰

### å±€é™æ€§3: è¯„æµ‹æ·±åº¦å—é™äºå•æ¬¡å¯¹è¯

**é—®é¢˜æè¿°**ï¼š
Bloomç”Ÿæˆ1ä¸ªtranscriptå°±ç»“æŸäº†ï¼Œæ— æ³•ï¼š
- è¯†åˆ«æ ·æœ¬è®¾è®¡é—®é¢˜ï¼ˆå¦‚user simulator promptä¸åˆç†ï¼‰
- å‘ç°ç³»ç»Ÿæ€§é—®é¢˜ï¼ˆå¦‚æŸç±»åœºæ™¯æ€»æ˜¯å¤±è´¥ï¼‰
- è¿­ä»£ä¼˜åŒ–æ ·æœ¬è´¨é‡

**Universal Frameworkçš„æ”¹è¿›**ï¼š
```python
# åˆ†å±‚è¿­ä»£ä¼˜åŒ–æœºåˆ¶
class LayeredAgenticLoop:
    def run(self):
        iteration = 0
        while iteration < self.max_iterations:
            # Layer 3: ç”Ÿæˆæ ·æœ¬
            samples = self.layer3_synthesize()

            # Layer 4: è¯„æµ‹
            results = self.layer4_evaluate(samples)

            # å½’å› åˆ†æ
            root_causes = self.analyze_failures(results)

            # å†³ç­–å±‚ï¼šæ™ºèƒ½è·¯ç”±
            if self.should_fix_layer3(root_causes):
                self.layer3_fix(root_causes)  # è‡ªåŠ¨ä¿®å¤
                iteration += 1
            elif self.should_fix_layer2(root_causes):
                self.layer2_fix(root_causes)
                iteration += 1
            elif results.success_rate >= 0.85:
                break  # è´¨é‡è¾¾æ ‡
            else:
                break  # éœ€è¦äººå·¥ä»‹å…¥
```

**ä¼˜åŠ¿**ï¼š
- è‡ªåŠ¨è¯†åˆ«å’Œä¿®å¤æ ·æœ¬é—®é¢˜
- æŒç»­æå‡æ ·æœ¬è´¨é‡
- å‡å°‘äººå·¥ä»‹å…¥æˆæœ¬

### å±€é™æ€§4: æ— æ³•æµ‹è¯•çœŸå®çš„å¤šæ­¥éª¤ä¸šåŠ¡æµç¨‹

**é—®é¢˜æè¿°**ï¼š
Bloomçš„personal-work-assistantåœºæ™¯ç›¸å¯¹ç®€å•ï¼š
- ä¸»è¦æ˜¯æ—¥ç¨‹ç®¡ç†ï¼ˆCRUDæ“ä½œï¼‰
- ä¸æ¶‰åŠå¤æ‚çš„çŠ¶æ€è½¬æ¢
- ç¼ºå°‘å¤šå®ä½“å…³è”éªŒè¯

**Universal Frameworkçš„æ”¹è¿›**ï¼š
```python
# å¤æ‚çš„è¯·å‡å®¡æ‰¹æµç¨‹
BusinessRules.md:
1. åˆ›å»ºè¯·å‡ç”³è¯·
2. æ£€æŸ¥ä½™é¢æ˜¯å¦å……è¶³
3. å¦‚æœä½™é¢ä¸è¶³ï¼Œéœ€è¦è¯¢é—®æ˜¯å¦ä½¿ç”¨è°ƒä¼‘
4. æäº¤å®¡æ‰¹ï¼ˆå•çº§/å¤šçº§å®¡æ‰¹ï¼‰
5. å®¡æ‰¹é€šè¿‡åæ‰£å‡ä½™é¢
6. å‘é€é€šçŸ¥ç»™ç›¸å…³äººå‘˜

# å¤šå®ä½“å…³è”éªŒè¯
expected_final_state = {
    "leave_applications": [...],      # ç”³è¯·è®°å½•
    "employee_leave_balances": [...], # ä½™é¢å˜åŒ–
    "approval_records": [...],        # å®¡æ‰¹è®°å½•
    "notifications": [...]            # é€šçŸ¥è®°å½•
}
```

**ä¼˜åŠ¿**ï¼š
- æµ‹è¯•çœŸå®çš„ä¸šåŠ¡å¤æ‚åº¦
- éªŒè¯å¤šæ­¥éª¤æµç¨‹çš„æ­£ç¡®æ€§
- å‘ç°æµç¨‹æ–­é“¾é—®é¢˜

---

## ğŸ”„ å¯¹äº§å“åŒ–ç³»ç»Ÿçš„å¯ç¤º

### å¯ç¤º1: Layer 1å¿…é¡»æ·±åº¦ç†è§£ä¸šåŠ¡é€»è¾‘

**ä»Bloomå­¦åˆ°çš„**ï¼š
Bloomçš„Understandingé˜¶æ®µéå¸¸é‡è§†å¯¹target behaviorçš„æ·±å…¥ç†è§£ã€‚

**å¯¹Layer 1çš„è¦æ±‚**ï¼š
```python
# Layer 1: ScenarioDesigneréœ€è¦åšçš„äº‹æƒ…
class ScenarioDesigner:
    def understand_business(self, user_description):
        """æ·±åº¦ç†è§£ä¸šåŠ¡åœºæ™¯ï¼ˆå€Ÿé‰´Bloomçš„Understandingï¼‰"""
        # 1. è¯†åˆ«æ ¸å¿ƒå®ä½“å’Œå…³ç³»
        entities = self.identify_entities(user_description)

        # 2. è¯†åˆ«ä¸šåŠ¡æµç¨‹å’Œè§„åˆ™
        workflows = self.identify_workflows(user_description)

        # 3. è¯†åˆ«èƒ½åŠ›æµ‹è¯•ç»´åº¦
        capabilities = self.map_to_capabilities(workflows)

        # 4. è®¾è®¡æµ‹è¯•æ¢¯åº¦
        complexity_levels = self.design_complexity_levels(capabilities)

        return {
            "entities": entities,
            "workflows": workflows,
            "capabilities": capabilities,
            "complexity_levels": complexity_levels
        }
```

### å¯ç¤º2: Layer 3éœ€è¦è‡ªç„¶çš„ç”¨æˆ·æ¨¡æ‹Ÿå™¨

**ä»Bloomå­¦åˆ°çš„**ï¼š
Bloomçš„ç”¨æˆ·æ¶ˆæ¯ç®€æ´ã€è‡ªç„¶ã€å£è¯­åŒ–ï¼Œé¿å…äº†"æµ‹è¯•å‘³"ã€‚

**å¯¹Layer 3çš„è¦æ±‚**ï¼š
```python
# Layer 3: SampleSynthesizerç”Ÿæˆuser_simulator_prompt
def generate_user_simulator_prompt(self, sample_spec):
    """
    å€Ÿé‰´Bloomçš„è‡ªç„¶äº¤äº’é£æ ¼ï¼Œç”ŸæˆçœŸå®æ„Ÿå¼ºçš„ç”¨æˆ·æ¨¡æ‹Ÿå™¨prompt
    """
    return f"""
ä½ æ˜¯ä¸€ä¸ªçœŸå®çš„{sample_spec['user_role']}ï¼Œæ­£åœ¨ä½¿ç”¨Agentç³»ç»Ÿå¤„ç†{sample_spec['task_description']}ã€‚

## äº¤äº’é£æ ¼è¦æ±‚ï¼š
1. ä½¿ç”¨å£è¯­åŒ–è¡¨è¾¾ï¼Œé¿å…æ­£å¼ä¹¦é¢è¯­
2. ä¸è¦ä¸€æ¬¡æ€§æä¾›æ‰€æœ‰ä¿¡æ¯ï¼Œæ ¹æ®Agentè¯¢é—®é€æ­¥æä¾›
3. å¯ä»¥è¡¨è¾¾ä¸ç¡®å®šæ€§å’Œæ¨¡ç³Šéœ€æ±‚
4. é€‚å½“ä½¿ç”¨çœç•¥å’Œç®€åŒ–è¡¨è¾¾

## ä½ çš„èƒŒæ™¯ä¿¡æ¯ï¼š
{sample_spec['user_background']}

## ä½ çš„æ ¸å¿ƒéœ€æ±‚ï¼š
{sample_spec['user_goal']}

## STOPæ¡ä»¶ï¼ˆä½•æ—¶ç»“æŸå¯¹è¯ï¼‰ï¼š
{sample_spec['stop_conditions']}
"""
```

### å¯ç¤º3: Layer 4éœ€è¦è¯¦ç»†çš„å½’å› è¯æ®

**ä»Bloomå­¦åˆ°çš„**ï¼š
Bloomçš„Highlightæœºåˆ¶æä¾›äº†è¯„æµ‹é€æ˜åº¦ã€‚

**å¯¹Layer 4çš„è¦æ±‚**ï¼š
```python
# Layer 4: AutoEvaluatorçš„å½’å› åˆ†æ
class FailureAnalyzer:
    def analyze(self, conversation_history, final_state, expected_state):
        """
        ç»“åˆBloomçš„highlightæœºåˆ¶å’Œæˆ‘ä»¬çš„ä¸¤å±‚å¤±è´¥åˆ†ææ¡†æ¶
        """
        # ç¬¬ä¸€å±‚ï¼šä¸šåŠ¡å¤±è´¥åŸå› 
        business_failures = self.analyze_business_failures(
            conversation_history, final_state, expected_state
        )

        # ç¬¬äºŒå±‚ï¼šè¿‡ç¨‹è¿è§„è¡Œä¸º
        process_violations = self.analyze_process_violations(
            conversation_history
        )

        # å…³é”®è¯æ®ç‚¹ï¼ˆå€Ÿé‰´Bloomçš„highlightï¼‰
        evidence_points = []
        for turn_idx, turn in enumerate(conversation_history):
            if self.is_critical_turn(turn):
                evidence_points.append({
                    "turn": turn_idx,
                    "description": self.describe_criticality(turn),
                    "quoted_text": turn['content'][:200]
                })

        return {
            "business_failures": business_failures,
            "process_violations": process_violations,
            "evidence_points": evidence_points,
            "root_causes": self.classify_root_causes(...)
        }
```

### å¯ç¤º4: éœ€è¦æ¸è¿›å¼å¤æ‚åº¦è®¾è®¡

**ä»Bloomå­¦åˆ°çš„**ï¼š
15è½®å¯¹è¯ä¸­ï¼Œå¤æ‚åº¦é€æ­¥æå‡ã€‚

**å¯¹äº§å“åŒ–ç³»ç»Ÿçš„è¦æ±‚**ï¼š
```yaml
# åœ¨unified_scenario_design.yamlä¸­è®¾è®¡complexity_progression
complexity_progression:
  baseline_samples: 30%    # ç®€å•åœºæ™¯ï¼Œå»ºç«‹åŸºçº¿
  medium_samples: 40%      # ä¸­ç­‰å¤æ‚åº¦ï¼Œå•ä¸€å†²çª
  complex_samples: 20%     # å¤æ‚åœºæ™¯ï¼Œå¤šé‡å†²çª
  edge_case_samples: 10%   # è¾¹ç•Œæƒ…å†µï¼Œæç«¯åœºæ™¯
```

---

## ğŸ“Š å¯¹æ¯”æ€»ç»“è¡¨

| ç»´åº¦ | Bloom Framework | Universal Framework | æ”¹è¿›æ–¹å‘ |
|------|----------------|-------------------|----------|
| **å·¥å…·å“åº”** | LLMç”Ÿæˆï¼ˆæ¨¡æ‹Ÿï¼‰ | çœŸå®ä»£ç æ‰§è¡Œ | âœ… ä¿è¯ä¸€è‡´æ€§å’Œé€»è¾‘æ­£ç¡®æ€§ |
| **Ground Truth** | LLMä¸»è§‚åˆ¤æ–­ | expected_final_state | âœ… ç²¾ç¡®éªŒè¯ï¼Œå¯é‡å¤è¯„æµ‹ |
| **ä¸šåŠ¡å¤æ‚åº¦** | ç›¸å¯¹ç®€å•ï¼ˆCRUDï¼‰ | æ”¯æŒå¤æ‚å¤šæ­¥éª¤æµç¨‹ | âœ… æµ‹è¯•çœŸå®ä¸šåŠ¡åœºæ™¯ |
| **è¿­ä»£ä¼˜åŒ–** | å•æ¬¡ç”Ÿæˆ | è·¨å±‚è¿­ä»£ä¼˜åŒ– | âœ… è‡ªåŠ¨è¯†åˆ«å’Œä¿®å¤é—®é¢˜ |
| **åœºæ™¯è®¾è®¡** | Understanding+Ideation | Layer 1æ·±åº¦ç†è§£ | âš¡ å€Ÿé‰´Bloomçš„ç†è§£æµç¨‹ |
| **ç”¨æˆ·æ¨¡æ‹Ÿ** | è‡ªç„¶å£è¯­åŒ– | éœ€åŠ å¼ºè‡ªç„¶æ€§ | âš¡ å­¦ä¹ Bloomçš„äº¤äº’é£æ ¼ |
| **è¯„æµ‹é€æ˜åº¦** | Highlightæœºåˆ¶ | éœ€å¢å¼ºè¯æ®è®°å½• | âš¡ å€Ÿé‰´Bloomçš„highlight |
| **å¤æ‚åº¦æ¢¯åº¦** | 15è½®æ¸è¿› | éœ€æ˜¾å¼è®¾è®¡ | âš¡ è®¾è®¡complexity_progression |

**å›¾ä¾‹**ï¼š
- âœ… Universal Frameworkçš„ä¼˜åŠ¿
- âš¡ éœ€è¦ä»Bloomå€Ÿé‰´çš„è®¾è®¡

---

## ğŸ¯ å…·ä½“è¡ŒåŠ¨é¡¹

åŸºäºBloomæ¡ˆä¾‹åˆ†æï¼Œäº§å“åŒ–ç³»ç»Ÿéœ€è¦åšçš„æ”¹è¿›ï¼š

### 1. Layer 1æ”¹è¿›ï¼ˆåœºæ™¯è®¾è®¡é˜¶æ®µï¼‰
- [ ] åœ¨ScenarioDesignerä¸­å¢åŠ "æ·±åº¦ç†è§£"æ¨¡å—
- [ ] è®¾è®¡complexity_progressioné…ç½®
- [ ] æ˜ç¡®æ ‡æ³¨å„æ ·æœ¬æµ‹è¯•çš„èƒ½åŠ›ç»´åº¦

### 2. Layer 3æ”¹è¿›ï¼ˆæ ·æœ¬åˆæˆé˜¶æ®µï¼‰
- [ ] ä¼˜åŒ–user_simulator_promptç”Ÿæˆé€»è¾‘
- [ ] å¼ºè°ƒè‡ªç„¶ã€å£è¯­åŒ–çš„äº¤äº’é£æ ¼
- [ ] è®¾è®¡STOPæ¡ä»¶çš„åˆç†æ€§éªŒè¯

### 3. Layer 4æ”¹è¿›ï¼ˆè¯„æµ‹ä¸å½’å› é˜¶æ®µï¼‰
- [ ] å¢åŠ evidence_pointsè®°å½•æœºåˆ¶
- [ ] åœ¨å½’å› åˆ†æä¸­æ ‡æ³¨å…³é”®å¯¹è¯è½®æ¬¡
- [ ] æä¾›è¯„æµ‹ç»“æœçš„å¯è§†åŒ–å±•ç¤º

### 4. è·¨å±‚æ”¹è¿›ï¼ˆæ•´ä½“æ¶æ„ï¼‰
- [ ] åœ¨å†³ç­–å±‚ä¸­å¢åŠ "æ ·æœ¬è‡ªç„¶æ€§"æ£€æŸ¥
- [ ] è¯†åˆ«ç”¨æˆ·æ¨¡æ‹Ÿå™¨è¿‡äºç”Ÿç¡¬çš„æ ·æœ¬
- [ ] è‡ªåŠ¨è·¯ç”±åˆ°Layer 3é‡æ–°ç”Ÿæˆ

---

## ğŸ“ ç»“è®º

Bloom Frameworkä¸ºæˆ‘ä»¬æä¾›äº†å®è´µçš„å‚è€ƒï¼š
1. **å¯å€Ÿé‰´çš„ä¼˜ç§€è®¾è®¡**ï¼šæ¸è¿›å¼éš¾åº¦ã€è‡ªç„¶äº¤äº’é£æ ¼ã€å¤šèƒ½åŠ›äº¤ç»‡ã€è¯„æµ‹é€æ˜åº¦
2. **éœ€è¦æ”¹è¿›çš„å±€é™**ï¼šLLMæ¨¡æ‹Ÿç¼ºä¹Ground Truthã€ç¼ºå°‘è¿­ä»£ä¼˜åŒ–ã€ä¸šåŠ¡å¤æ‚åº¦æœ‰é™
3. **å¯¹äº§å“åŒ–çš„å¯ç¤º**ï¼šç»“åˆBloomçš„æµç¨‹è®¾è®¡å’ŒUniversal Frameworkçš„çœŸå®æ‰§è¡Œä¼˜åŠ¿

**æ ¸å¿ƒç†å¿µ**ï¼š
- **å€Ÿé‰´Bloomçš„"è®¾è®¡æ€è·¯"**ï¼ˆUnderstandingã€Ideationçš„æ·±åº¦å’Œè‡ªç„¶æ€§ï¼‰
- **ä¿ç•™Universal Frameworkçš„"æ‰§è¡Œæ–¹å¼"**ï¼ˆçœŸå®ä»£ç ã€precise Ground Truthã€è¿­ä»£ä¼˜åŒ–ï¼‰
- **èåˆä¸¤è€…ä¼˜åŠ¿**ï¼Œæ„å»ºæ—¢æœ‰é«˜è´¨é‡è®¾è®¡åˆæœ‰ç²¾ç¡®éªŒè¯çš„è‡ªåŠ¨åŒ–æ ·æœ¬åˆæˆç³»ç»Ÿ

---

**æ–‡æ¡£ç»“æŸ**
