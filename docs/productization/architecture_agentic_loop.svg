<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1700">
  <!-- å®šä¹‰æ ·å¼ -->
  <defs>
    <style>
      .layer-box { fill: #f0f4f8; stroke: #2d3748; stroke-width: 3; rx: 10; }
      .init-phase { fill: #e6f7ff; stroke: #1890ff; stroke-width: 4; }
      .execute-phase { fill: #f6ffed; stroke: #52c41a; stroke-width: 4; }
      .orchestrator { fill: #fff7e6; stroke: #fa8c16; stroke-width: 4; }
      .decision-box { fill: #fff0f6; stroke: #eb2f96; stroke-width: 3; }
      .human-box { fill: #ffd700; stroke: #ff8c00; stroke-width: 3; }
      .skills-box { fill: #f0e6ff; stroke: #722ed1; stroke-width: 4; }

      .title-text { font-family: Arial, sans-serif; font-size: 32px; font-weight: bold; fill: #1a202c; }
      .subtitle-text { font-family: Arial, sans-serif; font-size: 22px; fill: #4a5568; }
      .layer-title { font-family: Arial, sans-serif; font-size: 24px; font-weight: bold; fill: #1a202c; }
      .section-title { font-family: Arial, sans-serif; font-size: 20px; font-weight: bold; fill: #2d3748; }
      .label-text { font-family: Arial, sans-serif; font-size: 18px; fill: #2d3748; }
      .small-text { font-family: Arial, sans-serif; font-size: 16px; fill: #4a5568; }
      .tag-text { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; }

      .arrow { stroke: #2d3748; stroke-width: 4; fill: none; marker-end: url(#arrowhead); }
      .feedback-arrow { stroke: #eb2f96; stroke-width: 4; fill: none; marker-end: url(#feedback-arrowhead); stroke-dasharray: 10,5; }
      .iteration-arrow { stroke: #52c41a; stroke-width: 4; fill: none; marker-end: url(#iteration-arrowhead); }
      .skills-arrow { stroke: #722ed1; stroke-width: 3; fill: none; marker-end: url(#skills-arrowhead); stroke-dasharray: 8,4; }

      .tag-init { fill: #1890ff; }
      .tag-execute { fill: #52c41a; }
      .tag-human { fill: #ff8c00; }
      .tag-auto { fill: #722ed1; }
    </style>

    <!-- ç®­å¤´å®šä¹‰ -->
    <marker id="arrowhead" markerWidth="12" markerHeight="12" refX="10" refY="4" orient="auto">
      <polygon points="0 0, 12 4, 0 8" fill="#2d3748" />
    </marker>
    <marker id="feedback-arrowhead" markerWidth="12" markerHeight="12" refX="10" refY="4" orient="auto">
      <polygon points="0 0, 12 4, 0 8" fill="#eb2f96" />
    </marker>
    <marker id="iteration-arrowhead" markerWidth="12" markerHeight="12" refX="10" refY="4" orient="auto">
      <polygon points="0 0, 12 4, 0 8" fill="#52c41a" />
    </marker>
    <marker id="skills-arrowhead" markerWidth="12" markerHeight="12" refX="10" refY="4" orient="auto">
      <polygon points="0 0, 12 4, 0 8" fill="#722ed1" />
    </marker>

    <!-- Human-in-the-Loop å›¾æ ‡å®šä¹‰ -->
    <symbol id="hitl-icon" viewBox="0 0 24 24">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0" stroke="#ff8c00" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M6 21v-2a4 4 0 0 1 4 -4h2.5" stroke="#ff8c00" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M19.001 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" stroke="#ff8c00" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M19.001 15.5v1.5" stroke="#ff8c00" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M19.001 21v1.5" stroke="#ff8c00" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M22.032 17.25l-1.299 .75" stroke="#ff8c00" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M17.27 20l-1.3 .75" stroke="#ff8c00" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M15.97 17.25l1.3 .75" stroke="#ff8c00" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M20.733 20l1.3 .75" stroke="#ff8c00" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
    </symbol>
  </defs>

  <!-- æ ‡é¢˜ -->
  <text x="1000" y="50" class="title-text" text-anchor="middle">åˆ†å±‚Agentic Loopæ¶æ„</text>
  <text x="1000" y="85" class="subtitle-text" text-anchor="middle">è‡ªåŠ¨æ ·æœ¬åˆæˆç³»ç»Ÿ - è·¨å±‚è¿­ä»£ä¼˜åŒ–</text>

  <!-- Orchestrator -->
  <rect x="750" y="120" width="500" height="90" class="orchestrator" />
  <text x="1000" y="155" class="section-title" text-anchor="middle">ğŸ¯ Orchestrator Agent</text>
  <text x="1000" y="185" class="small-text" text-anchor="middle">å…¨å±€å†³ç­–ä¸­å¿ƒ | åŸºäºå½’å› çš„æ™ºèƒ½è·¯ç”± | è¿­ä»£é¢„ç®—æ§åˆ¶</text>

  <!-- ç”¨æˆ·è¾“å…¥ -->
  <rect x="800" y="250" width="400" height="80" class="layer-box" />
  <text x="1000" y="280" class="section-title" text-anchor="middle">ğŸ‘¤ ç”¨æˆ·è¾“å…¥</text>
  <text x="1000" y="310" class="small-text" text-anchor="middle">ä¸šåŠ¡åœºæ™¯æè¿°</text>

  <!-- ç®­å¤´ï¼šç”¨æˆ·è¾“å…¥ -> Init Phase -->
  <path d="M 1000 330 L 1000 370" class="arrow" />

  <!-- Init Phase -->
  <rect x="300" y="370" width="1400" height="200" class="init-phase" />
  <text x="1000" y="410" class="layer-title" text-anchor="middle">Init Phase (å•æ¬¡æ‰§è¡Œ)</text>

  <!-- Layer 1 å†…å®¹ -->
  <g>
    <rect x="350" y="440" width="450" height="100" class="layer-box" />
    <text x="575" y="470" class="section-title" text-anchor="middle">Layer 1: åœºæ™¯ç†è§£ä¸è®¾è®¡</text>
    <text x="370" y="500" class="small-text">â€¢ æ·±åº¦ç†è§£ä¸šåŠ¡é€»è¾‘ï¼ˆBloomæ€è·¯ï¼‰</text>
    <text x="370" y="525" class="small-text">â€¢ ç”Ÿæˆé…ç½®æ–‡ä»¶å’Œä¸šåŠ¡è§„åˆ™æ–‡æ¡£</text>

    <rect x="850" y="440" width="400" height="100" class="layer-box" />
    <text x="1050" y="470" class="section-title" text-anchor="middle">è¾“å‡º</text>
    <text x="870" y="500" class="small-text">unified_scenario_design.yaml</text>
    <text x="870" y="525" class="small-text">BusinessRules.md</text>

    <rect x="1300" y="440" width="350" height="100" class="human-box" />
    <use href="#hitl-icon" x="1310" y="450" width="30" height="30"/>
    <text x="1475" y="470" class="section-title" text-anchor="middle">HITL-1 (å¿…é¡»)</text>
    <text x="1320" y="500" class="small-text">äººå·¥Reviewåœºæ™¯è®¾è®¡</text>
    <text x="1320" y="525" class="small-text">100%è§¦å‘ | 10-20åˆ†é’Ÿ</text>
  </g>

  <!-- ç®­å¤´ï¼šInit -> Execute -->
  <path d="M 1000 570 L 1000 620" class="arrow" />
  <text x="1050" y="600" class="label-text">é…ç½®æ–‡ä»¶</text>

  <!-- SkillsçŸ¥è¯†åº“ -->
  <rect x="50" y="620" width="200" height="600" class="skills-box" />
  <text x="150" y="655" class="section-title" text-anchor="middle">ğŸ“š SkillsçŸ¥è¯†åº“</text>
  <text x="70" y="690" class="small-text">å‚è€ƒæ ·æœ¬</text>
  <text x="70" y="720" class="small-text">ä¸šåŠ¡è§„åˆ™</text>
  <text x="70" y="750" class="small-text">æ ¼å¼è§„èŒƒ</text>
  <text x="70" y="780" class="small-text">ä»£ç æ¨¡æ¿</text>
  <text x="70" y="810" class="small-text">è®¾è®¡æ¨¡å¼</text>
  <text x="70" y="840" class="small-text">ç»éªŒæ•™è®­</text>
  <text x="150" y="1130" class="small-text" text-anchor="middle">â”â”â”â”â”</text>
  <text x="150" y="1160" class="small-text" text-anchor="middle">è‡ªåŠ¨æ¨è</text>
  <text x="150" y="1185" class="small-text" text-anchor="middle">æ™ºèƒ½åŒ¹é…</text>

  <!-- Skillsç®­å¤´åˆ°Layer 1 -->
  <path d="M 250 680 L 350 490" class="skills-arrow" />
  <text x="270" y="580" class="small-text" fill="#722ed1">åœºæ™¯å‚è€ƒ</text>

  <!-- Skillsç®­å¤´åˆ°Layer 2 -->
  <path d="M 250 770 L 350 760" class="skills-arrow" />
  <text x="270" y="760" class="small-text" fill="#722ed1">ä»£ç æ¨¡æ¿</text>

  <!-- Skillsç®­å¤´åˆ°Layer 3 -->
  <path d="M 250 870 L 350 920" class="skills-arrow" />
  <text x="270" y="890" class="small-text" fill="#722ed1">æ ·æœ¬æ¨¡å¼</text>

  <!-- Skillsç®­å¤´åˆ°Layer 4 -->
  <path d="M 250 970 L 350 1080" class="skills-arrow" />
  <text x="270" y="1020" class="small-text" fill="#722ed1">å½’å› ç»éªŒ</text>

  <!-- Execute Phaseå¤§æ¡† -->
  <rect x="300" y="620" width="1400" height="850" class="execute-phase" />
  <text x="1000" y="660" class="layer-title" text-anchor="middle">Execute Phase (Agentic Loop - è´¨é‡æ”¶æ•›è‡ªåŠ¨åœæ­¢)</text>

  <!-- Layer 2 -->
  <rect x="350" y="700" width="650" height="120" class="layer-box" />
  <text x="675" y="735" class="section-title" text-anchor="middle">Layer 2: ç»„ä»¶ä»£ç ç”Ÿæˆï¼ˆå¹¶è¡Œï¼‰</text>
  <text x="370" y="765" class="small-text">Toolsç”Ÿæˆ | Checkersç”Ÿæˆ | Prototypesç”Ÿæˆ | æ•°æ®æ± ç”Ÿæˆ</text>
  <text x="370" y="790" class="small-text">âš™ï¸ å¯è‡ªåŠ¨ä¿®å¤ï¼šTool bugã€Checkeré˜ˆå€¼è°ƒæ•´</text>

  <!-- Layer 2å³ä¾§æ ‡æ³¨ -->
  <rect x="1050" y="700" width="600" height="120" class="human-box" />
  <text x="1350" y="735" class="section-title" text-anchor="middle">åŠ¨æ€é¢„ç®— + HITL-2</text>
  <text x="1070" y="765" class="small-text">è½¯é™åˆ¶: 10æ¬¡ | ç¡¬é™åˆ¶: 30æ¬¡</text>
  <use href="#hitl-icon" x="1070" y="772" width="20" height="20"/>
  <text x="1095" y="790" class="small-text">æµ‹è¯•åå¤å¤±è´¥æ—¶äººå·¥ä»‹å…¥ï¼ˆ~5%ï¼‰</text>

  <!-- ç®­å¤´ Layer 2 -> Layer 3 -->
  <path d="M 675 820 L 675 860" class="arrow" />

  <!-- Layer 3 -->
  <rect x="350" y="860" width="650" height="120" class="layer-box" />
  <text x="675" y="895" class="section-title" text-anchor="middle">Layer 3: æ ·æœ¬åˆæˆï¼ˆç»„åˆï¼‰</text>
  <text x="370" y="925" class="small-text">åŸºäºcoverage matrixç”Ÿæˆæ ·æœ¬ | ç”Ÿæˆexpected_final_state</text>
  <text x="370" y="950" class="small-text">âš™ï¸ å¯è‡ªåŠ¨ä¿®å¤ï¼šUser simulator promptã€æ•°æ®é‡é‡‡æ ·</text>

  <!-- Layer 3å³ä¾§æ ‡æ³¨ -->
  <rect x="1050" y="860" width="600" height="120" class="layer-box" />
  <text x="1350" y="895" class="section-title" text-anchor="middle">åŠ¨æ€é¢„ç®—</text>
  <text x="1070" y="925" class="small-text">è½¯é™åˆ¶: 20æ¬¡ | ç¡¬é™åˆ¶: 50æ¬¡</text>
  <text x="1070" y="950" class="small-text">è‡ªåŠ¨ä¿®å¤ç‡: 80-90%</text>

  <!-- ç®­å¤´ Layer 3 -> Layer 4 -->
  <path d="M 675 980 L 675 1020" class="arrow" />

  <!-- Layer 4 -->
  <rect x="350" y="1020" width="650" height="120" class="layer-box" />
  <text x="675" y="1055" class="section-title" text-anchor="middle">Layer 4: è‡ªåŠ¨è¯„æµ‹ä¸å½’å› </text>
  <text x="370" y="1085" class="small-text">çœŸå®æ‰§è¡Œï¼ˆéLLMæ¨¡æ‹Ÿï¼‰| CheckeréªŒè¯ + LLMè¯„åˆ¤</text>
  <text x="370" y="1110" class="small-text">æ™ºèƒ½å½’å› ï¼šAgentèƒ½åŠ› vs æ ·æœ¬è®¾è®¡ vs ç³»ç»Ÿé—®é¢˜</text>

  <!-- Layer 4å³ä¾§æ ‡æ³¨ -->
  <rect x="1050" y="1020" width="600" height="120" class="human-box" />
  <text x="1350" y="1055" class="section-title" text-anchor="middle">æ™ºèƒ½åœæ­¢ + HITL-3</text>
  <text x="1070" y="1085" class="small-text">è´¨é‡è¾¾æ ‡(â‰¥85%) | è´¨é‡æ”¶æ•› | éœ‡è¡æ£€æµ‹</text>
  <use href="#hitl-icon" x="1070" y="1092" width="20" height="20"/>
  <text x="1095" y="1110" class="small-text">æ–°åœºæ™¯é¦–æ¬¡å½’å› æ ¡éªŒï¼ˆ~20%ï¼‰</text>

  <!-- ç®­å¤´ Layer 4 -> å†³ç­–åˆ¤æ–­ -->
  <path d="M 675 1140 L 675 1200" class="arrow" />
  <text x="700" y="1170" class="small-text" fill="#2d3748">Orchestratoråˆ†æå½’å› ç»“æœ</text>

  <!-- Orchestratorå†³ç­–è·¯ç”±é€»è¾‘ï¼ˆç®­å¤´æ ‡æ³¨ï¼‰ -->
  <g>
    <!-- åˆ°Layer 3çš„åé¦ˆ -->
    <path d="M 675 1200 L 320 1200 L 320 920 L 350 920" class="feedback-arrow" />
    <text x="270" y="1060" class="label-text" fill="#eb2f96" transform="rotate(-90 270 1060)">Layer 3é—®é¢˜</text>
    <text x="240" y="1060" class="small-text" fill="#eb2f96" transform="rotate(-90 240 1060)">æ ·æœ¬/ç”¨æˆ·æ¨¡æ‹Ÿå™¨</text>

    <!-- åˆ°Layer 2çš„åé¦ˆ -->
    <path d="M 675 1200 L 280 1200 L 280 760 L 350 760" class="feedback-arrow" />
    <text x="230" y="980" class="label-text" fill="#eb2f96" transform="rotate(-90 230 980)">Layer 2é—®é¢˜</text>
    <text x="200" y="980" class="small-text" fill="#eb2f96" transform="rotate(-90 200 980)">å·¥å…·/æ£€æŸ¥å™¨</text>

    <!-- å†³ç­–æ¡ä»¶æ ‡æ³¨ -->
    <rect x="850" y="1160" width="450" height="90" class="layer-box" opacity="0.95"/>
    <text x="1075" y="1185" class="section-title" text-anchor="middle">ğŸ¤” Orchestratorè·¯ç”±å†³ç­–</text>
    <text x="870" y="1210" class="small-text">âœ… è´¨é‡è¾¾æ ‡(â‰¥85%) â†’ è¾“å‡º</text>
    <text x="870" y="1232" class="small-text">ğŸ”„ å¯è‡ªåŠ¨ä¿®å¤ â†’ å›å¯¹åº”å±‚</text>
    <text x="1130" y="1210" class="small-text">â¸ï¸ è´¨é‡æ”¶æ•›/éœ‡è¡ â†’ åœæ­¢</text>
    <text x="1130" y="1232" class="small-text">âš ï¸ Criticalé—®é¢˜ â†’ HITL-4</text>
  </g>

  <!-- åˆ°äººå·¥ä»‹å…¥ -->
  <path d="M 1075 1250 L 1075 1310" class="arrow" />
  <text x="1095" y="1285" class="label-text" fill="#eb2f96">Layer 1çº§åˆ«é—®é¢˜</text>

  <!-- äººå·¥ä»‹å…¥åˆ¤æ–­ -->
  <rect x="825" y="1310" width="500" height="120" class="human-box" />
  <use href="#hitl-icon" x="835" y="1320" width="30" height="30"/>
  <text x="1075" y="1345" class="section-title" text-anchor="middle">HITL-4: Layer 1çº§åˆ«é—®é¢˜</text>
  <text x="845" y="1375" class="small-text">å±•ç¤ºé—®é¢˜æŠ¥å‘Šï¼ˆCriticalé—®é¢˜>30%æˆ–åå¤å‡ºç°ï¼‰</text>
  <text x="845" y="1400" class="small-text">é€‰é¡¹ï¼šä¿®æ”¹Layer 1é…ç½® OR æ¥å—å½“å‰ç»“æœï¼ˆ~15%ï¼‰</text>

  <!-- äººå·¥ä»‹å…¥çš„ä¸¤ä¸ªåˆ†æ”¯ -->
  <!-- åˆ†æ”¯1ï¼šä¿®æ”¹Layer 1 -->
  <path d="M 925 1430 L 925 1490 L 1720 1490 L 1720 480 L 1700 480" class="feedback-arrow" />
  <text x="1740" y="980" class="label-text" fill="#eb2f96">ä¿®æ”¹Layer 1</text>
  <text x="1740" y="1005" class="small-text" fill="#eb2f96">é‡ç½®Execute Phase</text>

  <!-- åˆ†æ”¯2ï¼šæ¥å—ç»“æœ -->
  <path d="M 1225 1430 L 1225 1520" class="arrow" />
  <text x="1245" y="1480" class="label-text">æ¥å—å½“å‰ç»“æœ</text>

  <!-- è¾“å‡º -->
  <rect x="975" y="1520" width="500" height="80" class="layer-box" />
  <text x="1225" y="1555" class="section-title" text-anchor="middle">ğŸ“Š æœ€ç»ˆè¾“å‡º</text>
  <text x="1225" y="1585" class="small-text" text-anchor="middle">è¯„æµ‹æŠ¥å‘Š + å½’å› åˆ†æ + ä¼˜åŒ–å»ºè®®</text>

  <!-- å³ä¾§å›¾ä¾‹ -->
  <g transform="translate(50, 100)">
    <text x="0" y="0" class="section-title">å›¾ä¾‹</text>

    <rect x="0" y="20" width="150" height="40" class="init-phase" />
    <text x="10" y="48" class="small-text">Init Phase</text>

    <rect x="0" y="70" width="150" height="40" class="execute-phase" />
    <text x="10" y="98" class="small-text">Execute Phase</text>

    <rect x="0" y="120" width="150" height="40" class="human-box" />
    <text x="10" y="148" class="small-text">äººå·¥ä»‹å…¥ç‚¹</text>

    <rect x="0" y="170" width="150" height="40" class="skills-box" />
    <text x="10" y="198" class="small-text">SkillsçŸ¥è¯†åº“</text>

    <line x1="10" y1="230" x2="140" y2="230" class="feedback-arrow" />
    <text x="10" y="255" class="small-text">åé¦ˆè·¯å¾„</text>

    <line x1="10" y1="270" x2="140" y2="270" class="skills-arrow" />
    <text x="10" y="295" class="small-text">çŸ¥è¯†æ¨è</text>

    <text x="0" y="330" class="small-text" font-weight="bold">4ä¸ªHITLç‚¹:</text>
    <text x="0" y="355" class="small-text">HITL-1: Layer1(100%)</text>
    <text x="0" y="375" class="small-text">HITL-2: Layer2(~5%)</text>
    <text x="0" y="395" class="small-text">HITL-3: Layer4(~20%)</text>
    <text x="0" y="415" class="small-text">HITL-4: è¿­ä»£ä¸­(~15%)</text>
  </g>

  <!-- åº•éƒ¨è¯´æ˜ -->
  <text x="1000" y="1650" class="small-text" text-anchor="middle" font-weight="bold">æ ¸å¿ƒä¼˜åŠ¿ï¼š4ä¸ªç²¾å‡†HITLç‚¹ + è·¨å±‚è‡ªåŠ¨ä¿®å¤ + Orchestratoræ™ºèƒ½è·¯ç”± + SkillsçŸ¥è¯†å¤ç”¨ + åŠ¨æ€æ”¶æ•›åœæ­¢</text>

</svg>