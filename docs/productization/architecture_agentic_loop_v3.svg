<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 1500">
  <!-- å®šä¹‰æ ·å¼ -->
  <defs>
    <style>
      .layer-box { fill: #f0f4f8; stroke: #2d3748; stroke-width: 3; rx: 10; }
      .init-agent { fill: #e6f7ff; stroke: #1890ff; stroke-width: 5; rx: 12; }
      .execute-agent { fill: #f6ffed; stroke: #52c41a; stroke-width: 5; rx: 12; }
      .human-box { fill: #ffd700; stroke: #ff8c00; stroke-width: 3; rx: 10; }
      .skills-box { fill: #f0e6ff; stroke: #722ed1; stroke-width: 4; rx: 10; }

      .title-text { font-family: Arial, sans-serif; font-size: 32px; font-weight: bold; fill: #1a202c; }
      .subtitle-text { font-family: Arial, sans-serif; font-size: 18px; fill: #4a5568; }
      .agent-title { font-family: Arial, sans-serif; font-size: 22px; font-weight: bold; fill: #1a202c; }
      .section-title { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: #2d3748; }
      .small-text { font-family: Arial, sans-serif; font-size: 13px; fill: #4a5568; }

      .arrow { stroke: #2d3748; stroke-width: 3; fill: none; marker-end: url(#arrowhead); }
      .handoff-arrow { stroke: #fa8c16; stroke-width: 4; fill: none; marker-end: url(#handoff-arrowhead); }
      .feedback-arrow { stroke: #eb2f96; stroke-width: 3; fill: none; marker-end: url(#feedback-arrowhead); stroke-dasharray: 8,4; }
      .skills-arrow { stroke: #722ed1; stroke-width: 2; fill: none; marker-end: url(#skills-arrowhead); stroke-dasharray: 6,3; }
    </style>

    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#2d3748" />
    </marker>
    <marker id="handoff-arrowhead" markerWidth="12" markerHeight="12" refX="10" refY="3" orient="auto">
      <polygon points="0 0, 12 3, 0 6" fill="#fa8c16" />
    </marker>
    <marker id="feedback-arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#eb2f96" />
    </marker>
    <marker id="skills-arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#722ed1" />
    </marker>

    <!-- HITLå›¾æ ‡ -->
    <symbol id="hitl-icon" viewBox="0 0 24 24">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0" stroke="#ff8c00" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M6 21v-2a4 4 0 0 1 4 -4h2.5" stroke="#ff8c00" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M19.001 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" stroke="#ff8c00" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M19.001 15.5v1.5" stroke="#ff8c00" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M19.001 21v1.5" stroke="#ff8c00" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M22.032 17.25l-1.299 .75" stroke="#ff8c00" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M17.27 20l-1.3 .75" stroke="#ff8c00" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M15.97 17.25l1.3 .75" stroke="#ff8c00" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M20.733 20l1.3 .75" stroke="#ff8c00" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
    </symbol>
  </defs>

  <!-- æ ‡é¢˜ -->
  <text x="700" y="40" class="title-text" text-anchor="middle">åŒAgentåè°ƒæ¶æ„</text>
  <text x="700" y="65" class="subtitle-text" text-anchor="middle">åŸºäºHandoffçš„è‡ªåŠ¨æ ·æœ¬åˆæˆç³»ç»Ÿ</text>

  <!-- ç”¨æˆ·è¾“å…¥ -->
  <rect x="500" y="100" width="400" height="60" class="layer-box" />
  <text x="700" y="125" class="section-title" text-anchor="middle">ğŸ‘¤ ç”¨æˆ·è¾“å…¥</text>
  <text x="700" y="145" class="small-text" text-anchor="middle">ä¸šåŠ¡åœºæ™¯æè¿°</text>

  <path d="M 700 160 L 700 190" class="arrow" />

  <!-- ========== Init Agent ========== -->
  <rect x="350" y="190" width="700" height="280" class="init-agent" />
  <text x="700" y="225" class="agent-title" text-anchor="middle">ğŸ¨ Init Agent</text>
  <text x="700" y="250" class="subtitle-text" text-anchor="middle">åœºæ™¯ç†è§£ä¸è®¾è®¡</text>

  <!-- Layer 1 -->
  <rect x="380" y="270" width="640" height="90" class="layer-box" />
  <text x="700" y="295" class="section-title" text-anchor="middle">Layer 1: åœºæ™¯ç†è§£ä¸è®¾è®¡</text>
  <text x="400" y="315" class="small-text">è¾“å‡ºï¼šunified_scenario_design.yaml | BusinessRules.md | format_specifications.json</text>
  <text x="400" y="335" class="small-text">æ¨¡å‹ï¼šClaude Opus 4.5 + Extended Thinking</text>

  <!-- HITL-1 -->
  <rect x="1080" y="280" width="260" height="90" class="human-box" />
  <use href="#hitl-icon" x="1090" y="290" width="22" height="22"/>
  <text x="1210" y="307" class="section-title" text-anchor="middle">HITL-1 (å¿…é¡»)</text>
  <text x="1100" y="327" class="small-text">äººå·¥Review | 100% | 10-20min</text>
  <text x="1100" y="345" class="small-text">é€‰é¡¹ï¼šy=ç¡®è®¤ n=ä¿®æ”¹éœ€æ±‚</text>

  <!-- Init Agentå†³ç­– -->
  <rect x="380" y="375" width="640" height="75" fill="#fff" stroke="#1890ff" stroke-width="2" stroke-dasharray="5,3" rx="8"/>
  <text x="700" y="400" class="section-title" text-anchor="middle">ğŸ“‹ Init Agentå†³ç­–</text>
  <text x="400" y="420" class="small-text">è®¾è®¡å®Œæˆä¸”é€šè¿‡Review â†’ handoffåˆ°Execute Agent</text>
  <text x="400" y="438" class="small-text">éœ€ä¿®æ”¹ â†’ é‡æ–°è®¾è®¡ | ä»Executeè¿”å› â†’ ä¿®æ”¹åé‡æ–°handoff</text>

  <!-- Handoff: Init -> Execute -->
  <path d="M 700 470 L 700 520" class="handoff-arrow" />
  <text x="720" y="500" class="section-title" fill="#fa8c16">Handoff â¬‡</text>

  <!-- ========== Execute Agent ========== -->
  <rect x="350" y="520" width="700" height="640" class="execute-agent" />
  <text x="700" y="555" class="agent-title" text-anchor="middle">âš™ï¸ Execute Agent</text>
  <text x="700" y="580" class="subtitle-text" text-anchor="middle">è¿­ä»£æ‰§è¡Œä¸è‡ªåŠ¨ä¿®å¤</text>

  <!-- Layer 2 -->
  <rect x="380" y="600" width="640" height="90" class="layer-box" />
  <text x="700" y="625" class="section-title" text-anchor="middle">Layer 2: ç»„ä»¶ä»£ç ç”Ÿæˆï¼ˆå¹¶è¡Œï¼‰</text>
  <text x="400" y="645" class="small-text">ç”Ÿæˆï¼šTools | Checkers | Prototypes | æ•°æ®æ±  + è‡ªåŠ¨åŒ–å•å…ƒæµ‹è¯•</text>
  <text x="400" y="665" class="small-text">æ¨¡å‹ï¼šClaude Sonnet 4.5 | è½¯é™åˆ¶10æ¬¡ | ç¡¬é™åˆ¶30æ¬¡ | æ— äººå·¥ä»‹å…¥</text>

  <path d="M 700 690 L 700 720" class="arrow" />

  <!-- Layer 3 -->
  <rect x="380" y="730" width="640" height="90" class="layer-box" />
  <text x="700" y="755" class="section-title" text-anchor="middle">Layer 3: æ ·æœ¬åˆæˆ</text>
  <text x="400" y="775" class="small-text">ç»„åˆå¼ç”Ÿæˆï¼šcoverage matrix + data pool + user_simulator_prompt</text>
  <text x="400" y="795" class="small-text">æ¨¡å‹ï¼šClaude Sonnet 4.5 | è½¯é™åˆ¶20æ¬¡ | ç¡¬é™åˆ¶50æ¬¡</text>

  <path d="M 700 820 L 700 850" class="arrow" />

  <!-- Layer 4 -->
  <rect x="380" y="860" width="640" height="90" class="layer-box" />
  <text x="700" y="885" class="section-title" text-anchor="middle">Layer 4: è‡ªåŠ¨è¯„æµ‹ä¸å½’å› </text>
  <text x="400" y="905" class="small-text">çœŸå®æ‰§è¡Œ + CheckeréªŒè¯ + LLMè¯„åˆ¤ + æ™ºèƒ½å½’å› ï¼ˆä¸¤å±‚å¤±è´¥åˆ†æï¼‰</text>
  <text x="400" y="925" class="small-text">æ¨¡å‹ï¼šå¾…è¯„æµ‹æ¨¡å‹ + Claude Opus 4.5ï¼ˆå½’å› ï¼‰ | è´¨é‡ç›®æ ‡â‰¥85%</text>

  <!-- HITL-2: é¦–æ¬¡å½’å› æ ¡éªŒ (åŸHITL-3) -->
  <rect x="1080" y="870" width="260" height="90" class="human-box" />
  <use href="#hitl-icon" x="1090" y="880" width="20" height="20"/>
  <text x="1210" y="897" class="section-title" text-anchor="middle">HITL-2 (æ¡ä»¶)</text>
  <text x="1100" y="917" class="small-text">é¦–æ¬¡å½’å›  | ~20% | 3-5min</text>
  <text x="1100" y="935" class="small-text">é€‰é¡¹ï¼šy=å½’å› æ­£ç¡® n=ä¿®æ­£å½’å› </text>

  <!-- Execute Agentå†³ç­– -->
  <rect x="380" y="965" width="640" height="175" fill="#fff" stroke="#52c41a" stroke-width="2" stroke-dasharray="5,3" rx="8"/>
  <text x="700" y="990" class="section-title" text-anchor="middle">ğŸ¤” Execute Agentå†³ç­–ï¼ˆè§„åˆ™å¼•æ“ï¼‰</text>
  <text x="400" y="1010" class="small-text">âœ… è´¨é‡è¾¾æ ‡(â‰¥85%) â†’ è¾“å‡ºæœ€ç»ˆç»“æœ</text>
  <text x="400" y="1030" class="small-text">ğŸ”„ Layer 3é—®é¢˜(æ ·æœ¬/ç”¨æˆ·æ¨¡æ‹Ÿå™¨) â†’ è‡ªå·±ä¿®å¤ï¼Œç»§ç»­è¿­ä»£</text>
  <text x="400" y="1050" class="small-text">ğŸ”„ Layer 2é—®é¢˜(å·¥å…·/æ£€æŸ¥å™¨) â†’ è‡ªå·±ä¿®å¤ï¼Œç»§ç»­è¿­ä»£</text>
  <text x="400" y="1070" class="small-text">âš ï¸ Layer 1é—®é¢˜(è®¾è®¡ç¼ºé™·) â†’ è§¦å‘HITL-3ï¼Œhandoffå›Init Agent</text>
  <text x="400" y="1090" class="small-text">â¸ï¸ è´¨é‡æ”¶æ•›/éœ‡è¡ â†’ åœæ­¢è¿­ä»£ï¼Œè¾“å‡ºå½“å‰ç»“æœ</text>
  <text x="400" y="1110" class="small-text">ğŸ›‘ Criticalé—®é¢˜&gt;30%æˆ–ç¡¬é™åˆ¶100æ¬¡ â†’ è§¦å‘HITL-3</text>
  <text x="400" y="1130" class="small-text">å†³ç­–æ¨¡å—ï¼šQualityConvergenceDetector | LayerBudgetManager | ProblemTypeAnalyzer</text>

  <!-- Layer 2/3è‡ªä¿®å¤åé¦ˆ (è·¯å¾„æ”¶çª„) -->
  <path d="M 380 1050 L 280 1050 L 280 645 L 380 645" class="feedback-arrow" />
  <text x="260" y="850" class="small-text" fill="#eb2f96" transform="rotate(-90 260 850)">è‡ªä¿®å¤</text>

  <!-- Handoff: Execute -> HITL-4 -> Init -->
  <path d="M 700 1160 L 700 1210" class="handoff-arrow" />
  <text x="720" y="1190" class="section-title" fill="#fa8c16">Layer 1é—®é¢˜ â¬‡</text>

  <!-- HITL-3 -->
  <rect x="450" y="1210" width="500" height="90" class="human-box" />
  <use href="#hitl-icon" x="460" y="1220" width="22" height="22"/>
  <text x="700" y="1245" class="section-title" text-anchor="middle">HITL-3: Layer 1çº§åˆ«é—®é¢˜</text>
  <text x="470" y="1265" class="small-text">Criticalé—®é¢˜&gt;30%æˆ–åå¤å‡ºç° | ~15%è§¦å‘ | 15-30åˆ†é’Ÿ</text>
  <text x="470" y="1283" class="small-text">é€‰é¡¹ï¼šy=ä¿®æ”¹Layer 1è®¾è®¡ n=æ¥å—å½“å‰ç»“æœ</text>

  <!-- Handoff: HITL-3 -> Init (ä»å³ä¾§ç»•è¿‡ï¼Œé¿å¼€æ‰€æœ‰HITLæ¡†) -->
  <path d="M 950 1250 L 1360 1250 L 1360 260 L 1050 260" class="handoff-arrow" />
  <text x="1380" y="755" class="section-title" fill="#fa8c16" transform="rotate(-90 1380 755)">Handoffå›Init â¬†</text>

  <!-- æ¥å—ç»“æœ -> è¾“å‡º -->
  <path d="M 850 1300 L 850 1400 L 1100 1400" class="arrow" />
  <text x="870" y="1355" class="small-text">æ¥å—ç»“æœ</text>

  <!-- è´¨é‡è¾¾æ ‡ -> è¾“å‡º (ä»ä¸Šæ–¹è¿›å…¥) -->
  <path d="M 1020 1050 L 1200 1050 L 1200 1300" class="arrow" />
  <text x="1040" y="1045" class="small-text">è´¨é‡è¾¾æ ‡</text>

  <!-- æœ€ç»ˆè¾“å‡º (ä½ç½®ä¸‹ç§») -->
  <rect x="1100" y="1300" width="200" height="180" class="layer-box" />
  <text x="1200" y="1330" class="section-title" text-anchor="middle">ğŸ“Š æœ€ç»ˆè¾“å‡º</text>
  <text x="1120" y="1360" class="small-text">è¯„æµ‹æŠ¥å‘Š</text>
  <text x="1120" y="1380" class="small-text">å½’å› åˆ†æ</text>
  <text x="1120" y="1400" class="small-text">ä¼˜åŒ–å»ºè®®</text>
  <text x="1120" y="1420" class="small-text">è´¨é‡æŒ‡æ ‡</text>
  <text x="1120" y="1440" class="small-text">è¿­ä»£å†å²</text>
  <text x="1120" y="1460" class="small-text">é—®é¢˜åˆ†å¸ƒ</text>

  <!-- SkillsçŸ¥è¯†åº“ -->
  <rect x="50" y="600" width="120" height="280" class="skills-box" />
  <text x="110" y="630" class="section-title" text-anchor="middle">ğŸ“š Skills</text>
  <text x="65" y="655" class="small-text">å‚è€ƒæ ·æœ¬</text>
  <text x="65" y="675" class="small-text">ä¸šåŠ¡è§„åˆ™</text>
  <text x="65" y="695" class="small-text">æ ¼å¼è§„èŒƒ</text>
  <text x="65" y="715" class="small-text">ä»£ç æ¨¡æ¿</text>
  <text x="65" y="735" class="small-text">è®¾è®¡æ¨¡å¼</text>
  <text x="65" y="755" class="small-text">ç»éªŒæ•™è®­</text>

  <path d="M 170 670 L 380 330" class="skills-arrow" />
  <path d="M 170 710 L 380 645" class="skills-arrow" />
  <path d="M 170 750 L 380 775" class="skills-arrow" />
  <path d="M 170 790 L 380 905" class="skills-arrow" />

  <!-- å›¾ä¾‹ (å·¦ç§»åˆ°è§†å›¾å·¦ä¾§è¾¹ç¼˜åŒºåŸŸ) -->
  <g transform="translate(-30, 950)">
    <text x="0" y="0" class="section-title">å›¾ä¾‹</text>
    <rect x="0" y="15" width="70" height="25" class="init-agent" />
    <text x="80" y="32" class="small-text">Init Agent</text>

    <rect x="180" y="15" width="70" height="25" class="execute-agent" />
    <text x="260" y="32" class="small-text">Execute Agent</text>

    <line x1="0" y1="60" x2="70" y2="60" class="handoff-arrow" />
    <text x="80" y="65" class="small-text">Handoff</text>

    <line x1="180" y1="60" x2="250" y2="60" class="feedback-arrow" />
    <text x="260" y="65" class="small-text">åé¦ˆä¿®å¤</text>

    <text x="0" y="100" class="section-title">3ä¸ªHITLç‚¹</text>
    <text x="0" y="120" class="small-text">HITL-1: Layer1 (100%)</text>
    <text x="0" y="138" class="small-text">HITL-2: Layer4é¦–æ¬¡å½’å›  (~20%)</text>
    <text x="0" y="156" class="small-text">HITL-3: Layer1é—®é¢˜ (~15%)</text>
  </g>

  <text x="700" y="1490" class="small-text" text-anchor="middle" font-weight="bold">æ ¸å¿ƒæœºåˆ¶ï¼šHandoffåŒAgentåè°ƒ + å„è‡ªå†³ç­– + è·¨å±‚è‡ªåŠ¨ä¿®å¤ + SkillsçŸ¥è¯†å¤ç”¨ + 3ä¸ªHITLç‚¹</text>
</svg>
