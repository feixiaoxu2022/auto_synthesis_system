# 业务规则质量检查清单

## 符号说明
- ✓ = 必需项（必须通过）
- ○ = 建议项（强烈建议通过）
- △ = 可选项（根据场景需要）

---

## 0. 内容必要性检查（新增，优先级最高）

### 禁止内容检查（任何一项违反都必须删除）
- [ ] ✓ **全文没有工具文档**（参数说明、返回格式、错误场景）
- [ ] ✓ **全文没有实体模型定义**（字段表格、属性列表）
- [ ] ✓ **全文没有执行流程伪代码**（步骤1/2/3...、if-then逻辑）
- [ ] ✓ **全文没有系统设计内容**（错误处理策略、重试逻辑、最佳实践）
- [ ] ✓ **全文没有示例场景**（用户需求案例、期望操作序列）
- [ ] ✓ **全文没有Checker说明**（验证规范、check_type、检查优先级）

### 长度合理性检查
- [ ] ○ 总行数建议 ≤ 300行（多数场景的合理范围）
- [ ] ✓ 总行数 ≤ 500行（超过500行需认真检查是否有冗余）
- [ ] ○ 单个规则组 ≤ 50行
- [ ] ○ 单条规则 ≤ 20行

**核心原则**：遵循"每条规则必须师出有名"，长度会自然合理。

### 必要性自检
- [ ] ✓ 每条规则都能回答："对应哪个check_item？"
- [ ] ✓ 每条规则都能回答："Agent违反后Checker会检测吗？"
- [ ] ✓ 删除后问："没有这条规则，Agent会做错什么？"答不出就删掉

---

## 1. 基础完整性检查

### 文档结构
- [ ] ✓ 包含"系统角色定义"章节
- [ ] ✓ 包含"核心能力"章节（3-5个能力点）
- [ ] ✓ 包含"业务规则"章节，并分为多个规则组
- [ ] ✓ 包含"通用约束和原则"章节
- [ ] ✓ 包含"异常情况处理"章节
- [ ] △ 包含"信息收集原则"章节（多轮对话场景必需）
- [ ] △ 包含"对话流程规范"章节（多轮对话场景必需）

### 规则编号
- [ ] ✓ 所有规则都有唯一编号（格式：规则X.Y）
- [ ] ✓ 规则编号连续无跳跃
- [ ] ✓ 每个规则都有简短名称
- [ ] ○ 规则名称清晰反映规则内容

### 规则组织
- [ ] ✓ 规则按逻辑分组（建议3-5个规则组）
- [ ] ✓ 每个规则组有清晰的名称
- [ ] ○ 同组规则具有相关性

---

## 2. 规则内容完整性检查

### 规则三要素
对每条规则检查：
- [ ] ✓ 包含明确的"触发条件"（"当...时"）
- [ ] ✓ 包含具体的"业务动作"（"动作："）
- [ ] ✓ 包含"标准回复"（"完成后回复："）

### 触发条件质量
- [ ] ✓ 使用业务术语（不是技术字段名）
- [ ] ✓ 可以明确判断真假
- [ ] ✓ 多个条件之间逻辑关系清晰（且/或）
- [ ] ○ 条件数量合理（建议2-5个）
- [ ] ✓ 没有"user.tier"这样的技术字段名
- [ ] ✓ 没有"status == 'active'"这样的代码表达式

### 业务动作质量
- [ ] ✓ 描述"做什么"而非"怎么做"
- [ ] ✓ 使用业务语言（不是技术实现）
- [ ] ✓ 动作描述具体且可执行
- [ ] ✓ 没有工具名称（如"create_booking工具"）
- [ ] ✓ 没有函数调用（如"调用XX方法"）
- [ ] ✓ 没有数据库操作（如"更新XX表的XX字段"）
- [ ] ✓ 没有检查器逻辑（如"成功标准：状态为XX"）

### 标准回复质量
- [ ] ✓ 提供清晰的操作结果确认
- [ ] ✓ 使用专业、礼貌的语气
- [ ] ○ 包含必要的占位符（如`{room_name}`）
- [ ] ○ 针对不同结果提供不同回复（成功/失败）
- [ ] ✓ 回复内容完整，不是"..."或"待定"
- [ ] ✓ 占位符使用统一格式（`{variable_name}`）

---

## 3. 业务视角检查

### 技术细节泄露检查
- [ ] ✓ 全文没有工具名称或函数名
- [ ] ✓ 全文没有数据库表名或字段名
- [ ] ✓ 全文没有检查器类型或验证逻辑
- [ ] ✓ 全文没有评测框架的技术术语
- [ ] ✓ 全文没有"核心动作"、"成功标准"等SOP术语

### 业务术语一致性
- [ ] ✓ 关键业务术语使用一致（如"VIP用户"不混用"高级用户"）
- [ ] ✓ 实体名称使用一致（如"会议室"不混用"房间"）
- [ ] ○ 动作动词使用一致

---

## 4. 可验证性检查

### 规则可验证性
- [ ] ✓ 触发条件可以明确判断是否满足
- [ ] ✓ 业务动作可以判断是否完成
- [ ] ✓ 标准回复可以验证是否包含关键信息
- [ ] ○ 有明确的成功和失败场景

### 边界情况覆盖
- [ ] ✓ 至少定义4个常见异常场景
- [ ] ✓ 每个异常都有判断条件
- [ ] ✓ 每个异常都有处理方式
- [ ] ✓ 每个异常都有回复内容
- [ ] ○ 资源不可用异常
- [ ] ○ 用户信息不完整异常
- [ ] ○ 超出业务限制异常
- [ ] ○ 需要额外审批异常

### 规则优先级清晰性
- [ ] ✓ 互斥规则之间边界清晰
- [ ] ✓ 特殊规则和通用规则关系明确
- [ ] ○ 有优先级标注或说明

---

## 5. 规则完整性和适配性检查

### 规则与设计文件的一致性
- [ ] ✓ 规则覆盖了checklist中的所有check_item
- [ ] ✓ 规则与unified_scenario_design.yaml中的设计一致
- [ ] ✓ 没有与YAML设计冲突的规则

### 场景特定要素（根据实际场景需要）
- [ ] △ 如涉及计算/分配：规则包含相关逻辑和约束
- [ ] △ 如涉及多轮对话：包含信息收集策略和对话流程
- [ ] △ 如涉及优先级判断：优先级规则清晰明确
- [ ] △ 如涉及数值约束：数值约束明确且合理

---

## 6. 通用约束和原则检查

- [ ] ✓ 包含"数据完整性原则"
- [ ] ✓ 包含"用户体验原则"
- [ ] ○ 包含"合规和安全原则"
- [ ] ✓ 说明信息验证要求
- [ ] ✓ 定义沟通风格要求
- [ ] ✓ 定义反馈清晰度标准

---

## 7. 文档质量检查

### 格式规范性
- [ ] ✓ 使用统一的Markdown格式
- [ ] ✓ 标题层级正确（## 大标题，### 小标题）
- [ ] ✓ 规则编号格式一致

### 长度适中性
- [ ] ✓ 文档总长度合理（建议≤300行，警惕>500行）
- [ ] ○ 单条规则长度适中（建议不超过20行）

**原则**：遵循"每条规则必须师出有名"，长度会自然合理。如果超过500行，认真检查是否包含了工具文档、实体模型、伪代码、系统设计等不该写的内容。

---

## 快速检查模式（5分钟）

**核心6项**（优先级从高到低）：
1. [ ] **内容必要性**：没有工具文档/实体模型/伪代码/系统设计，长度合理（警惕>500行）
2. [ ] 全文没有工具名称、字段名等技术细节
3. [ ] 所有规则都有"触发条件-动作-回复"三要素
4. [ ] 至少定义4个异常场景
5. [ ] 规则覆盖checklist中的check_item，与YAML设计一致
6. [ ] 通用约束和原则完整

**通过核心6项**：基本合格
**第1项未通过**：严重问题，需要删减冗余内容
**未通过**：必须修正后重新检查

---

## 质量等级评定

- **优秀**：必需项(✓)全部通过，建议项(○)≥80%通过
- **良好**：必需项(✓)全部通过，建议项(○)≥60%通过
- **合格**：必需项(✓)全部通过
- **需改进**：必需项(✓)未全部通过
